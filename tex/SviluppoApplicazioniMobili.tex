\chapter{Sviluppo Applicazioni Mobili}
\label{chap:sam}
    Diversamente dalle applicazioni per desktop, dove per molto tempo la
    piattaforma di riferimento è stata Windows, il panorama delle piattaforme
    mobili è molto frammentato. I principali sistemi operativi mobili sono: iOS,
    Android e Windows Phone, seguiti da altri meno diffusi come BlackBerry e
    Symbian.

    Quando si decide di sviluppare un'applicazione mobile è quindi necessario
    scegliere se supportare una o più di queste piattaforme. Lo sviluppo per
    una sola piattaforma (sviluppo \singleplat{}) può essere appropriato se si ha
    intenzione di creare applicazioni destinate a particolari dispositivi
    aziendali (es. lettore di codici a barre), per i quali sappiamo che il
    sistema operativo utilizzato non cambierà, o se semplicemente per una
    strategia di mercato si è deciso di concentrarsi su un'unica piattaforma.
    Anche se sviluppare per una singola piattaforma semplifica di
    molto il lavoro, questo pone dei rischi in quanto la durata del successo
    dell'applicazione è legata al futuro della piattaforma stessa: gli utenti
    infatti nel tempo potrebbero preferire l'uso di altri dispositivi con
    differenti sistemi operativi.
    L'alternativa è quella di supportare allo stesso tempo numerose piattaforme
    (sviluppo \crossplat{}), col vantaggio di raggiungere un bacino di utenza
    più ampio.
    Ci sono molti approcci differenti per lo sviluppo \crossplat{}, ognuno con
    differenti vantaggi, ma la caratteristica che tutti hanno in comune è la
    possibilità di sviluppare la stessa (o molto simile) applicazione per
    diverse piattaforme mobili.

    Esistono vari modi di realizzare applicazioni mobili, ognuno dei quali può
    essere impiegato sia per lo sviluppo \singleplat{}, sia per quello
    \crossplat{}.
    Possiamo quindi definire tre tipologie di applicazioni in base al modo in
    cui vengono realizzate: Native, Web, Ibride.
    Nei successivi paragrafi verranno descritte nel dettaglio queste diverse
    tipologie cercando di evidenziare come gli strumenti utilizzati per
    realizzarle influiscano sullo sviluppo \crossplat{}.

    \section{Applicazioni Native}
    \label{sec:nativapp}
        Per applicazioni native si intendono quelle costruite per una specifica
        piattaforma utilizzando le risorse software fornite appositamente dal
        produttore della piattaforma stessa.
        Lo sviluppo di esse si basa quindi sull'utilizzo di SDK
        (Soft\-ware De\-vel\-op\-ment Kit) e di
        linguaggi di programmazione specifici che variano tra i diversi
        sistemi operativi. Per esempio,
        le applicazioni native per iOS sono scritte in linguaggio Objective-C
        e sfruttano le API create appositamente da Apple; quelle Android fanno
        uso del linguaggio Java esteso con le API realizzate da Google; mentre
        per le applicazioni Windows Phone si utilizzano le API di
        Microsoft .NET e XAML. Ogni SDK fornisce quindi tutto il soft\-ware necessario
        per supportare l'intero ciclo di sviluppo dell'applicazione: dalla sua
        scrittura, passando per la creazione del pacchetto installabile, fino
        alla sua pubblicazione sui vari canali di diffusione.

        Le applicazioni native permettono di sfruttare al massimo l'hard\-ware
        dei dispositivi, risultando, ad esempio, più adatte allo sviluppo di giochi con
        una ricca grafica. Inoltre grazie alle
        API, fornite direttamente dal produttore, si ha un completo accesso al
        dispositivo, con la possibilità quindi di sfruttare vari sensori
        come fotocamera, GPS e accelerometro. Infine la distribuzione
        dell'applicazione avviene attraverso i vari \mbox{store}\footnote{Ogni
        piattaforma
        fornisce il proprio canale di distribuzione per le applicazioni:
        App Store per iOS, Google Play Store per Android, Windows Store per
        Windows Phone} delle piattaforme, questo permette di avere maggiore
        pubblicità per l'applicazione grazie all'enorme ecosistema che si è
        venuto a creare intorno ad essi.

        Di contro questa tecnica non è molto adatta allo sviluppo di
        applicazioni \crossplat{}. Realizzare la stessa applicazione per
        diverse piattaforme richiede che gli sviluppatori debbano riscriverla
        più volte in linguaggi diversi e in ambienti di
        sviluppo differenti. Il problema inoltre è che con il crescere del
        numero di sistemi operativi che si intende supportare, crescono
        proporzionalmente anche il tempo, lo
        sforzo e il denaro spesi per produrre e testare l'applicazione.
        Un altro importante fattore in ogni progetto di sviluppo di
        applicazioni native \crossplat{} è la disponibilità di programmatori
        con le giuste conoscenze. Creare applicazioni native richiede
        l'avere a disposizione un gruppo di sviluppatori che conosca tutti i
        linguaggi necessari per lavorare su ogni piattaforma (requisito
        non molto facile da soddisfare) oppure si dovrà contare su diversi team
        di programmatori, ognuno specializzato in una particolare piattaforma.

        Esistono strumenti di cross-com\-pil\-ing che possono essere una soluzione
        parziale del problema, essi consentono di scrivere l'applicazione in un solo
        linguaggio (per esempio \js{}) e di compilarla poi in un'applicazione
        nativa (sempre sfruttando l'SDK fornito dal produttore della
        piattaforma). Questa soluzione aiuta a ridurre il numero di differenti
        linguaggi di programmazione che gli sviluppatori devono saper maneggiare,
        ma comunque non elimina la necessità di dover compilare differenti
        applicazioni per ogni piattaforma. Cross-com\-pil\-ing inoltre introduce un
        nuovo livello di astrazione tra il codice della app e il run\-time; di
        questo bisogna tenere conto quando si vanno a fare operazioni di
        ottimizzazione, test\-ing e di de\-bug\-ging.

    \section{Applicazioni Web}
    \label{sec:webapp}
        Le Applicazioni Web (chiamate anche \mbox{Browser} App o Web App) non sono
        altro che siti web ottimizzati per i dispositivi mobili. Il loro uso è
        reso possibile dai moderni \mbox{browser} mobili come: Mobile Safari (sui
        dispositivi iOS), Google Chrome per Android (sui dispositivi Android 4+)
        e Internet Explorer 10 (sui dispositivi Windows Phone 8).\clearpage

        Per realizzare questo tipo di applicazione viene sfruttata la potenza di
        \html{}5, \css{}3 e \js{}. \html{}5 è la quinta versione del linguaggio
        \html{}, il quale fornisce gli elementi di base che costituiscono le pagine
        web. Esso supporta i contenuti multimediali, ed è stato creato con
        l'obiettivo di poter essere eseguito da qualsiasi \mbox{browser}
        mobile\citep{White:Native-vs-Html}. Una delle tante novità di \html{}5 è la
        cosiddetta ``ap\-pli\-ca\-tion \mbox{cache}'': attraverso questo strumento è
        possibile dire al \mbox{browser} quali file salvare (non nella \mbox{cache}
        ``normale'' ma in una \mbox{cache} apposita, definita per l'appunto
        ``ap\-pli\-ca\-tion \mbox{cache}''). Il funzionamento dell'ap\-pli\-ca\-tion \mbox{cache} è
        piuttosto semplice: sostanzialmente, si crea un file all'interno del
        quale si specifica la lista di file che il \mbox{browser} deve salvare nella
        sua ``memoria'' e che deve mostrare anche quando si è offline. Il
        vantaggio principale della ``ap\-pli\-ca\-tion \mbox{cache}'', rispetto a quella
        tradizionale, è il controllo: mentre nella \mbox{cache} ``normale'' è il
        \mbox{browser} a decidere (più o meno) quali sono i file da salvare e tenere in
        \mbox{cache}, con lo strumento offerto da \html{}5 possiamo dire noi con
        precisione quali risorse tenere in memoria, possiamo infatti decidere di
        memorizzare pagine sulle quali non si è ancora navigato, fino
        addirittura a memorizzare interi script. In questo modo le applicazioni
        web sono in grado di essere eseguite anche quando il dispositivo mobile
        è offline.

        Scrivere un'applicazione web di successo, non è solo una questione di
        rispettare le specifiche, ma dipende anche dall'implementazione del
        \mbox{browser} del dispositivo. È da vedere quanto sia nell'interesse di
        aziende come Apple e Google tenere i loro \mbox{browser} aggiornati
        continuamente con gli standard, infatti ci sarebbe poi il rischio che
        \html{}5 diventi uno standard per le applicazioni e che quindi ci rimettano
        gli \mbox{store}\citep{White:Native-vs-Html}.

        Sfruttando opportunamente \css{}3, \html{}5 e \js{}, gli sviluppatori
        possono ottimizzare la loro applicazione dandole un aspetto
        diverso a seconda del sistema operativo mobile che intendono supportare,
        in modo da rendere l'esperienza utente il più possibile simile a quella
        nativa, oppure possono progettare un'unica interfaccia grafica che viene
        utilizzata su ogni piattaforma. Per agevolare lo sviluppo di
        applicazioni web sono nati numerosi frame\-work
        (vedi \ref{sec:frameworkwebapp}), ognuno dei quali
        fornisce elementi grafici tipici delle applicazioni native
        (liste, bottoni, finestre di notifica, ecc\ldots) e le
        funzioni \js{} per poterli manipolare.

        \html{}5 promette che scrivendo un unico codice per l'applicazione,
        essa sia direttamente funzionante su ogni piattaforma, questa e le
        altre caratteristiche rendono la creazione di web app il modo più veloce
        per realizzare applicazioni mobili  \crossplat{}. Essendo eseguite
        direttamente nel \mbox{browser} non c'è la necessità di creare il pacchetto
        nativo da installare su ogni piattaforma, liberando così gli
        sviluppatori dal vincolo di dover utilizzare gli SDK forniti dai
        produttori delle piattaforme.
        Le applicazioni web hanno il vantaggio di poter fruire di aggiornamenti
        direttamente attraverso il \mbox{browser}, è infatti sufficiente che lo
        sviluppatore aggiorni il codice della pagina web online. Non sono quindi
        necessari passaggi extra per la distribuzione dell'aggiornamento.
        Rispetto alle applicazioni native c'è anche il vantaggio della maggior
        disponibilità di programmatori con conoscenze dei linguaggi \css{}3, \html{}5
        e \js{}, rispetto a quelli con conoscenze specifiche per i
        linguaggi Objective-C, Java e .NET.

        Il più grande svantaggio di questo genere di applicazioni è che non
        possono accedere ad una vasta gamma di sensori e API dei vari
        dispositivi. Inoltre la promessa di \html{}5 di scrivere una volta ed eseguire
        ovunque non è totalmente rispettata, infatti, essendoci molti \mbox{browser}
        diversi e molte versioni degli stessi \mbox{browser} (chrome è stato aggiornato
        21 volte in due anni, con conseguente modifica dell'interpretazione di
        web app\citep{White:Native-vs-Html}) i vari dispositivi accedono in modo
        diverso alle applicazioni web. La conseguenza è che gli sviluppatori
        devono creare versioni diverse per \mbox{browser} diversi, perdendo così di
        parte dei benefici argomentati per lo sviluppo di web app. Un
        altro grande svantaggio si ha nelle performance che sono sicuramente
        inferiori a quelle delle applicazioni native, in particolare, oltre
        alla potenza hardware dei dispositivi, le prestazioni delle web app
        sono limitate dalla capacità dei \mbox{browser} nel
        caricare i dati e nel visualizzarli (load\-ing e ren\-der\-ing). Infine non
        essendo possibile distribuire queste applicazioni attraverso i più
        popolari \mbox{store}, viene persa la visibilità e la possibilità di
        monetizzazione offerta dagli stessi. Per trarre profitto
        dall'applicazione è quindi necessario trovare soluzioni alternative.

    \section{Applicazioni Ibride}
        Le applicazioni ibride combinano la convenienza dello sviluppo con
        \html{}5,
        \css{}3 e \js{} con aspetti delle app native (da qui l'appellativo
        ``ibride''). Queste applicazioni vengono impacchettate in file
        installabili proprio come le applicazioni native ma i linguaggi
        utilizzati nella loro realizzazione sono ancora quelli impiegati nelle
        applicazioni web. Le applicazioni ibride sono controllate da una web
        view (UIWebView su iOS, WebView su Android e altri) in questo modo il
        contenuto \js{} e \html{} è  presentato in un formato a schermo
        intero usando il motore di ren\-der\-ing del \mbox{browser} nativo\footnote{Da
        notare che non viene utilizzato il \mbox{browser} ma solo il motore.}. WebKit è
        il motore di ren\-der\-ing del \mbox{browser} che è utilizzato su iOS, Android,
        BlackBerry e altri. Quello che rende un'applicazione ibrida differente
        da una web è la possibilità di implementare un livello di astrazione
        che espone le funzionalità del dispositivo (GPS, fotocamera,
        accelerometro, file sys\-tem, ecc...) attraverso API \js{}.

        Esistono diversi frame\-work che mettono a disposizione un buon insieme di
        API per accedere alle funzionalità del dispositivo ma comunque questi
        devono essere combinati insieme ai frame\-work utilizzabili
        per costruire applicazioni web in modo da poterne sfruttare tutti i
        vantaggi (vedi \ref{sec:webapp}).

        Il poter utilizzare i linguaggi del web fa delle applicazioni ibride una
        buona strategia nell'ottica dello sviluppo \crossplat{}, in quanto
        il codice può appunto essere riutilizzato quasi completamente, e
        rispetto alle web app si ha la possibilità di accedere a
        funzionalità specifiche del dispositivo. Inoltre questo tipo di
        applicazioni possono essere distribuite tramite i comuni \mbox{store} con
        annessa possibilità di monetizzazione.

        Anche se lo stesso codice può essere utilizzato su diverse piattaforme,
        è necessario programmare in ambienti di sviluppo opportunamente
        configurati con gli stessi SDK usati per realizzare applicazioni native,
        questi servono infatti per creare i vari pacchetti da installare sui
        dispositivi. Ad oggi
        esistono anche dei servizi online di compilazione cloud-based, come
        \pg{} Build (vedi \ref{subsec:hybridpg}), che permettono di ovviare a
        questo inconveniente. Una difficoltà
        importante si trova nella fase di debugging dove è necessario installare
        l'applicazione sul dispositivo (al contrario delle web app che possono
        essere testate direttamente nel \mbox{browser}) e ricorrere a software di terze
        parti per poter poi avere a disposizione i tipici strumenti per il
        debug di pagine web\footnote{Un software che permette di utilizzare
        strumenti di web debugging per applicazioni ibride è WEINRE
        (\url{http://people.apache.org/~pmuellr/weinre/docs/latest/Home.html}).
        }. Da tener conto, quando si decide di sviluppare un'applicazione con
        questo stile, è la possibilità che questa venga rifiutata nel momento
        della pubblicazione sullo \mbox{store}; questo può accadere, per esempio, su
        App Store dove esistono regole molto rigide che l'applicazione deve
        rispettare riguardo a prestazioni, qualità e stile di programmazione.

    \section{Conclusioni}
        Ogni paradigma di sviluppo ha i suoi vantaggi e svantaggi; non esiste il
        modo migliore per sviluppare un'applicazione ma piuttosto esiste una
        scelta migliore tenendo conto di cosa si vuole ottenere e delle risorse
        che si hanno a disposizione, queste possono riguardare sia la
        conoscenza dei linguaggi di programmazione sia il tempo e il denaro che
        si hanno a disposizione.

        Sviluppare un applicazione web può risultare più rapido e magari meno
        costoso, ma questa soluzione è accettabile se non si desidera che il
        prodotto finale venga distribuito via \mbox{store} e che si disponga di
        altre soluzioni se si è interessati a trarre profitto dalla vendita.
        Questo \textit{modus operandi} è attuabile se si sviluppano applicazioni
        che non necessitino di utilizzare sensori del dispositivo mobile, ad
        esempio applicazioni di gestione di dati o di applicazioni connesse
        come e-com\-merce. Se si è disposti ad accettare questi compromessi,
        un'applicazione web è sicuramente una buona soluzione dal punto di vista
        dello sviluppo \crossplat{} stando attenti ai possibili problemi di
        compatibilità tra i diversi \mbox{browser} che verranno impiegati dagli utenti.

        Se abbiamo la necessità, invece, di realizzare un'applicazione più
        complessa che sfrutti il dispositivo sottostante e non si vuol
        rinunciare alle, magari già familiari, tecnologie web allora una buona
        idea potrebbe essere sviluppare un'applicazione ibrida. Questa
        soluzione, implicando la realizzazione di pacchetti installabili, offre
        la possibilità di vendere il prodotto finito sugli \mbox{store} traendone
        profitto. Per chi è esperto nelle tecnologie web e si vuole cimentare
        nella programmazione mobile, questa soluzione si rivela ottima prestando
        le dovute attenzioni, infatti possono sorgere problemi quando si accede
        alle funzionalità del dispositivo oppure alcune funzionalità desiderate
        potrebbero non essere implementabili\footnote{Un esempio sono i servizi
        che vengono eseguiti in back\-ground sui dispositivi Android che non sono
        implementabili in applicazioni ibride}.

        Se si deve realizzare un'applicazione molto responsiva come per esempio
        un gioco con una pesante grafica oppure, se per scelte di mercato, si
        decide di supportare una sola piattaforma mobile, allora vale la pena
        intraprendere la strada di sviluppo in codice nativo. In questo modo non
        si incorre nel rischio che l'applicazione non venga accettata sullo
        \mbox{store} relativo e di sicuro si ottengono prestazioni più elevate rispetto
        alle altre due soluzioni. Inoltre se comunque si vogliono supportare più
        piattaforme, si può pensare di voltare lo sguardo su frame\-work
        cross-com\-pil\-ing (\hyperref[sec:titanium]{vedi~\ref{sec:titanium}}) così
        da utilizzare il medesimo codice (non nativo, per esempio \js{})
        per creare applicazioni, a tutti gli effetti, native.

